!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).TweakpaneIntervalPlugin={})}(this,(function(t){"use strict";function e(t){return null==t}const n={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class i{constructor(t){var e;this.message=null!==(e=n[t.type](t.context))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}static alreadyDisposed(){return new i({type:"alreadydisposed"})}static notBindable(){return new i({type:"notbindable"})}static propertyNotFound(t){return new i({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new i({type:"shouldneverhappen"})}}class s{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.handler!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}}class r{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new s,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){const e=this.constraint_?this.constraint_.constrain(t):t;!this.equals_(this.rawValue_,e)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=e,this.emitter.emit("change",{rawValue:e,sender:this}))}}class o{constructor(t){this.emitter=new s,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.value_!==t&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{sender:this,rawValue:this.value_}))}}function a(t,e){const n=null==e?void 0:e.constraint,i=null==e?void 0:e.equals;return n||i?new r(t,e):new o(t)}class l{constructor(t){this.emitter=new s,this.valMap_=t;for(const t in this.valMap_){this.valMap_[t].emitter.on("change",(()=>{this.emitter.emit("change",{key:t,sender:this})}))}}static createCore(t){return Object.keys(t).reduce(((e,n)=>Object.assign(e,{[n]:a(t[n])})),{})}static fromObject(t){const e=this.createCore(t);return new l(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function u(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const i=t(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function h(t){return{custom:e=>u(e)(t),boolean:u((t=>"boolean"==typeof t?t:void 0))(t),number:u((t=>"number"==typeof t?t:void 0))(t),string:u((t=>"string"==typeof t?t:void 0))(t),function:u((t=>"function"==typeof t?t:void 0))(t),constant:e=>u((t=>t===e?e:void 0))(t),raw:u((t=>t))(t),object:e=>u((t=>{var n;if(null!==(n=t)&&"object"==typeof n)return function(t,e){return Object.keys(e).reduce(((n,i)=>{if(void 0===n)return;const s=(0,e[i])(t[i]);return s.succeeded?Object.assign(Object.assign({},n),{[i]:s.value}):void 0}),{})}(t,e)}))(t),array:e=>u((t=>{var n;if(Array.isArray(t))return n=e,t.reduce(((t,e)=>{if(void 0===t)return;const i=n(e);return i.succeeded&&void 0!==i.value?[...t,i.value]:void 0}),[])}))(t)}}const c={optional:h(!0),required:h(!1)};const d="tp";function p(t){return(e,n)=>[d,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}const m="http://www.w3.org/2000/svg";class v{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}}function g(t,e){if(t instanceof e)return t;if(t instanceof v){const n=t.constraints.reduce(((t,n)=>t||(n instanceof e?n:null)),null);if(n)return n}return null}class f{constructor(t){this.maxValue=t.max,this.minValue=t.min}constrain(t){let n=t;return e(this.minValue)||(n=Math.max(n,this.minValue)),e(this.maxValue)||(n=Math.min(n,this.maxValue)),n}}class _{constructor(t){this.step=t}constrain(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step}}class b{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const w={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class x{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=w[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const y={"+":t=>t,"-":t=>-t,"~":t=>~t};class V{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=y[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function P(t){return(e,n)=>{for(let i=0;i<t.length;i++){const s=t[i](e,n);if(""!==s)return s}return""}}function E(t,e){var n;const i=t.substr(e).match(/^\s+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function M(t,e){var n;const i=t.substr(e).match(/^[0-9]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function C(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const i=function(t,e){const n=M(t,e);if(""!==n)return n;const i=t.substr(e,1);if("-"!==i&&"+"!==i)return"";const s=M(t,e+=1);return""===s?"":i+s}(t,e);return""===i?"":n+i}function k(t,e){const n=t.substr(e,1);if("0"===n)return n;const i=function(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}(t,e);return e+=i.length,""===i?"":i+M(t,e)}const D=P([function(t,e){const n=k(t,e);if(e+=n.length,""===n)return"";const i=t.substr(e,1);if(e+=i.length,"."!==i)return"";const s=M(t,e);return n+i+s+C(t,e+=s.length)},function(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const i=M(t,e);return e+=i.length,""===i?"":n+i+C(t,e)},function(t,e){const n=k(t,e);return e+=n.length,""===n?"":n+C(t,e)}]);const L=P([function(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[01]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-7]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i},function(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const i=function(t,e){var n;const i=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=i&&i[0])&&void 0!==n?n:""}(t,e);return""===i?"":n+i}]),K=P([L,D]);function S(t,e){return function(t,e){const n=K(t,e);return e+=n.length,""===n?null:{evaluable:new b(n),cursor:e}}(t,e)||function(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const i=$(t,e);if(!i)return null;e=i.cursor,e+=E(t,e).length;const s=t.substr(e,1);return e+=s.length,")"!==s?null:{evaluable:i.evaluable,cursor:e}}(t,e)}function T(t,e,n){n+=E(e,n).length;const i=t.filter((t=>e.startsWith(t,n)))[0];return i?(n+=i.length,{cursor:n+=E(e,n).length,operator:i}):null}const j=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>function(t,e){return(n,i)=>{const s=t(n,i);if(!s)return null;i=s.cursor;let r=s.evaluable;for(;;){const s=T(e,n,i);if(!s)break;i=s.cursor;const o=t(n,i);if(!o)return null;i=o.cursor,r=new x(s.operator,r,o.evaluable)}return r?{cursor:i,evaluable:r}:null}}(t,e)),(function t(e,n){const i=S(e,n);if(i)return i;const s=e.substr(n,1);if(n+=s.length,"+"!==s&&"-"!==s&&"~"!==s)return null;const r=t(e,n);return r?{cursor:n=r.cursor,evaluable:new V(s,r.evaluable)}:null}));function $(t,e){return e+=E(t,e).length,j(t,e)}function O(t){var e;const n=function(t){const e=$(t,0);return e?e.cursor+E(t,e.cursor).length!==t.length?null:e.evaluable:null}(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function U(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function N(t,e){const n=e.ownerDocument.defaultView,i=e.getBoundingClientRect();return{x:t.pageX-((n&&n.scrollX||0)+i.left),y:t.pageY-((n&&n.scrollY||0)+i.top)}}class R{constructor(t){this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new s;!function(t){return void 0!==t.ontouchstart}(this.elem_.ownerDocument)?t.addEventListener("mousedown",this.onMouseDown_):(t.addEventListener("touchstart",this.onTouchStart_),t.addEventListener("touchmove",this.onTouchMove_),t.addEventListener("touchend",this.onTouchEnd_))}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(N(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(N(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(N(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey})}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey})}onTouchEnd_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function B(t,e,n,i,s){return i+(t-e)/(n-e)*(s-i)}function I(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function q(t,e,n){return Math.min(Math.max(t,e),n)}const X=p("txt");class z{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(X(),X(void 0,"num")),e.arrayPosition&&this.element.classList.add(X(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(X("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(X()),this.inputElement.classList.add(X("i"));const i=t.createElement("div");i.classList.add(X("k")),this.element.appendChild(i),this.knobElement=i;const s=t.createElementNS(m,"svg");s.classList.add(X("g")),this.knobElement.appendChild(s);const r=t.createElementNS(m,"path");r.classList.add(X("gb")),s.appendChild(r),this.guideBodyElem_=r;const o=t.createElementNS(m,"path");o.classList.add(X("gh")),s.appendChild(o),this.guideHeadElem_=o;const a=t.createElement("div");a.classList.add(p("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(X(void 0,"drg"));this.element.classList.add(X(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),i=q(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+i},0 L${n},4 L${n+i},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class A{constructor(t,e){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=a(null),this.view=new z(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_);const n=new R(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}onInputChange_(t){const n=t.currentTarget.value,i=this.parser_(n);e(i)||(this.value.rawValue=i),this.view.refresh()}onInputKeyDown_(t){const e=function(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}(this.baseStep_,{altKey:(n=t).altKey,downKey:"ArrowDown"===n.key,shiftKey:n.shiftKey,upKey:"ArrowUp"===n.key});var n;0!==e&&(this.value.rawValue+=e)}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}onPointerMove_(t){if(!t.data.point)return;const e=t.data.point.x-t.data.bounds.width/2;this.value.rawValue=this.originRawValue_+e*this.props.get("draggingScale"),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_}onPointerUp_(){this.dragging_.rawValue=null}}function F(t,e){const n=t&&g(t,_);return n?I(n.step):Math.max(I(e),2)}function Y(t){const e=function(t){const e=t?g(t,_):null;return e?e.step:null}(t);return null!=e?e:1}function H(t,e){var n;const i=t&&g(t,_),s=Math.abs(null!==(n=null==i?void 0:i.step)&&void 0!==n?n:e);return 0===s?.1:Math.pow(10,Math.floor(Math.log10(s))-1)}const J=p("pndtxt");class W{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(J()),this.textViews.forEach((e=>{const n=t.createElement("div");n.classList.add(J("a")),n.appendChild(e.element),this.element.appendChild(n)}))}}class G{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(((n,i)=>function(t,e,n){return new A(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:a(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}(t,e,i))),this.acs_.forEach(((t,n)=>{!function({primary:t,secondary:e,forward:n,backward:i}){let s=!1;function r(t){s||(s=!0,t(),s=!1)}t.emitter.on("change",(()=>{r((()=>{e.rawValue=n(t,e)}))})),e.emitter.on("change",(()=>{r((()=>{t.rawValue=i(t,e)})),r((()=>{e.rawValue=n(t,e)}))})),r((()=>{e.rawValue=n(t,e)}))}({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[n],backward:(t,i)=>{const s=e.assembly.toComponents(t.rawValue);return s[n]=i.rawValue,e.assembly.fromComponents(s)}})})),this.view=new W(t,{textViews:this.acs_.map((t=>t.view))})}}class Q{constructor(t,e){this.min=t,this.max=e}static isObject(t){if("object"!=typeof t||null===t)return!1;const e=t.min,n=t.max;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.min===e.min&&t.max===e.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const Z={fromComponents:t=>new Q(t[0],t[1]),toComponents:t=>[t.min,t.max]};class tt{constructor(t){this.edge=t}constrain(t){var e,n,i,s,r,o,a,l;if(t.min<=t.max)return new Q(null!==(n=null===(e=this.edge)||void 0===e?void 0:e.constrain(t.min))&&void 0!==n?n:t.min,null!==(s=null===(i=this.edge)||void 0===i?void 0:i.constrain(t.max))&&void 0!==s?s:t.max);const u=(t.min+t.max)/2;return new Q(null!==(o=null===(r=this.edge)||void 0===r?void 0:r.constrain(u))&&void 0!==o?o:u,null!==(l=null===(a=this.edge)||void 0===a?void 0:a.constrain(u))&&void 0!==l?l:u)}}const et=p("rsltxt");class nt{constructor(t,e){this.sliderView_=e.sliderView,this.textView_=e.textView,this.element=t.createElement("div"),this.element.classList.add(et());const n=t.createElement("div");n.classList.add(et("s")),n.appendChild(this.sliderView_.element),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(et("t")),i.appendChild(this.textView_.element),this.element.appendChild(i)}}const it=p("rsl");class st{constructor(t,e){this.maxValue_=e.maxValue,this.minValue_=e.minValue,this.element=t.createElement("div"),this.element.classList.add(it()),e.viewProps.bindClassModifiers(this.element),this.value_=e.value,this.value_.emitter.on("change",this.onValueChange_.bind(this));const n=t.createElement("div");n.classList.add(it("t")),this.element.appendChild(n),this.trackElement=n;const i=t.createElement("div");i.classList.add(it("b")),n.appendChild(i),this.barElement=i;const s=["min","max"].map((e=>{const i=t.createElement("div");return i.classList.add(it("k"),it("k",e)),n.appendChild(i),i}));this.knobElements=[s[0],s[1]],this.update()}valueToX_(t){return 100*q(B(t,this.minValue_,this.maxValue_,0,1),0,1)}update(){const t=this.value_.rawValue;0===t.length?this.element.classList.add(it(void 0,"zero")):this.element.classList.remove(it(void 0,"zero"));const e=[this.valueToX_(t.min),this.valueToX_(t.max)];this.barElement.style.left=`${e[0]}%`,this.barElement.style.right=100-e[1]+"%",this.knobElements.forEach(((t,n)=>{t.style.left=`${e[n]}%`}))}onValueChange_(){this.update()}}class rt{constructor(t,e){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.maxValue_=e.maxValue,this.minValue_=e.minValue,this.viewProps=e.viewProps,this.value=e.value,this.view=new st(t,{maxValue:e.maxValue,minValue:e.minValue,value:this.value,viewProps:e.viewProps});const n=new R(this.view.trackElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}ofs_(){return"min"===this.grabbing_?this.view.knobElements[0].getBoundingClientRect().width/2:"max"===this.grabbing_?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(t){if(!t.point)return null;return B((t.point.x+this.ofs_())/t.bounds.width,0,1,this.minValue_,this.maxValue_)}onPointerDown_(t){if(!t.data.point)return;const e=t.data.point.x/t.data.bounds.width,n=this.value.rawValue,i=B(n.min,this.minValue_,this.maxValue_,0,1),s=B(n.max,this.minValue_,this.maxValue_,0,1);Math.abs(s-e)<=.025?this.grabbing_="max":Math.abs(i-e)<=.025?this.grabbing_="min":e>=i&&e<=s?(this.grabbing_="length",this.grabOffset_=B(e-i,0,1,this.minValue_,this.maxValue_)):e<i?(this.grabbing_="min",this.onPointerMove_(t)):e>s&&(this.grabbing_="max",this.onPointerMove_(t))}onPointerMove_(t){const e=this.valueFromData_(t.data);if(null!==e)if("min"===this.grabbing_)this.value.rawValue=new Q(e,this.value.rawValue.max);else if("max"===this.grabbing_)this.value.rawValue=new Q(this.value.rawValue.min,e);else if("length"===this.grabbing_){const t=this.value.rawValue.length;let n=e-this.grabOffset_,i=n+t;n<this.minValue_?(n=this.minValue_,i=this.minValue_+t):i>this.maxValue_&&(n=this.maxValue_-t,i=this.maxValue_),this.value.rawValue=new Q(n,i)}}onPointerUp_(t){this.grabbing_=null}}class ot{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sc_=new rt(t,e);const n={baseStep:e.baseStep,constraint:e.constraint,textProps:l.fromObject({draggingScale:e.draggingScale,formatter:e.formatter})};this.tc_=new G(t,{assembly:Z,axes:[n,n],parser:e.parser,value:this.value,viewProps:e.viewProps}),this.view=new nt(t,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function at(t){return Q.isObject(t)?new Q(t.min,t.max):new Q(0,0)}function lt(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function ut(t){const n=[],i=function(t){return"max"in t&&!e(t.max)||"min"in t&&!e(t.min)?new f({max:t.max,min:t.min}):null}(t);i&&n.push(i);const s=function(t){return"step"in t&&!e(t.step)?new _(t.step):null}(t);return s&&n.push(s),new tt(new v(n))}const ht={id:"input-interval",type:"input",css:".tp-rslv_k{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-rslv_k{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-rslv_k:hover{background-color:var(--btn-bg-h)}.tp-rslv_k:focus{background-color:var(--btn-bg-f)}.tp-rslv_k:active{background-color:var(--btn-bg-a)}.tp-rslv_k:disabled{opacity:0.5}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:'';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}",accept:(t,e)=>{if(!Q.isObject(t))return null;const n=c,i=function(t,e){const n=c.required.object(e)(t);return n.succeeded?n.value:void 0}(e,{max:n.optional.number,min:n.optional.number,step:n.optional.number});return i?{initialValue:new Q(t.min,t.max),params:i}:null},binding:{reader:t=>at,constraint:t=>ut(t.params),equals:Q.equals,writer:t=>lt},controller(t){const e=t.value,n=t.constraint;if(!(n instanceof tt))throw i.shouldNeverHappen();const s=(e.rawValue.min+e.rawValue.max)/2,r=n.edge&&g(n.edge,f);if(void 0!==(null==r?void 0:r.minValue)&&void 0!==(null==r?void 0:r.maxValue))return new ot(t.document,{baseStep:Y(n.edge),constraint:n.edge,draggingScale:H(r,s),formatter:U(F(n.edge,s)),maxValue:r.maxValue,minValue:r.minValue,parser:O,value:e,viewProps:t.viewProps});const o={baseStep:Y(n.edge),constraint:n.edge,textProps:l.fromObject({draggingScale:s,formatter:U(F(n.edge,s))})};return new G(t.document,{assembly:Z,axes:[o,o],parser:O,value:e,viewProps:t.viewProps})}};t.plugin=ht,Object.defineProperty(t,"__esModule",{value:!0})}));
